<?xml version="1.0" encoding="UTF-8"?>
<Definition parser="v3">
    <QuerySet ID="GET_USER_ACCOUNT">
        <Parameters>
            <Parameter name="USER_UUID" type="uuid">
                <When value="null"/>
                <Otherwise><![CDATA[AND ACCOUNT_ID = $USER_UUID$]]></Otherwise>
            </Parameter>
            <Parameter name="USER_NAME" type="string">
                <When value="null"/>
                <Otherwise><![CDATA[AND ACCOUNT_NAME = $USER_NAME$]]></Otherwise>
            </Parameter>
            <Parameter name="USER_MAIL" type="string">
                <When value="null"/>
                <Otherwise><![CDATA[AND ACCOUNT_MAIL = $USER_MAIL$]]></Otherwise>
            </Parameter>
        </Parameters>
        <Query>
            <SQL name="main">
                <![CDATA[
                    SELECT ACCOUNT_ID,
                           ACCOUNT_NAME,
                           ACCOUNT_MAIL,
                           ACCOUNT_PASSWORD_VERIFIER,
                           ACCOUNT_SALT,
                           ACCOUNT_LAST_PASSWORD_UPDATE,
                           ACCOUNT_PASSWORD_RESET_INTERVAL
                    FROM DNAUTHORIZATION.USERS_ACCOUNT
                    WHERE TRUE $USER_UUID$ $USER_NAME$ $USER_MAIL$;
                ]]>
            </SQL>
        </Query>
    </QuerySet>
    <QuerySet ID="ADD_USER_ACCOUNT">
        <Parameters>
            <Parameter name="USER_NAME" type="string"/>
            <Parameter name="USER_MAIL" type="string"/>
            <Parameter name="PASSWORD_VERIFIER" type="string"/>
            <Parameter name="SALT" type="string"/>
        </Parameters>
        <Query>
            <SQL name="main">
                <![CDATA[
                    INSERT INTO USERS_ACCOUNT(ACCOUNT_NAME, ACCOUNT_MAIL, ACCOUNT_PASSWORD_VERIFIER, ACCOUNT_SALT)
                    VALUES ($USER_NAME$, $USER_MAIL$, $PASSWORD_VERIFIER$, $SALT$)
                    RETURNING *;
                ]]>
            </SQL>
        </Query>
    </QuerySet>
    <QuerySet ID="GET_ALL_USER_INFO">
        <Query>
            <SQL name="main">
                <![CDATA[
                    SELECT ACCOUNT_ID,
                           USER_SURNAME,
                           USER_NAME,
                           USER_PATRONYMIC,
                           USER_DATE_OF_BIRTH,
                           USER_PERSONAL_NUMBER,
                           USER_STRUCTURE,
                           USER_CURRENT_POST,
                           USER_PHONE,
                           USER_OFFICE
                    FROM DNAUTHORIZATION.USERS_INFO;
                ]]>
            </SQL>
        </Query>
    </QuerySet>
</Definition>